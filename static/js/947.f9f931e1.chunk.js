"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[947],{8947:function(e,n,o){o.r(n),o.d(n,{default:function(){return se}});var r=o(6484),t=o(824),i=o(1413),d=o(9439),s=o(9434),a=o(1134),l=o(4695),c=o(8007),f=o(6052),u=o(6351),h=o(2791),x=o(4373),b=o(8382),p=o(2233),m=o(89),g=o(9657),j=o(1692),v=o(7943),C=o(6336),y=o(2437),_=o(7653),I=o(184),w=c.Ry({name:c.Z_().required("Name is required").min(3,"Name must be no less than 3 characters long").matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,"Name may contain only letters, apostrophe, dash and spaces"),number:c.Z_().required("Number is required").transform((function(e){return e.replace(/\D+/g,"")})).min(7,"Number phone must be no less than 7 characters long").max(12,"Number phone must be no more than 12 digits")}).required(),$=function(){var e=(0,h.useState)(!1),n=(0,d.Z)(e,2),o=n[0],r=n[1],t=(0,s.I0)(),c=(0,s.v9)(u.Af),$=(0,s.v9)(u.Y),Z=(0,b.p)();(0,h.useEffect)((function(){$||r(!1)}),[$]);var k=(0,a.cI)({mode:"onTouched",resolver:(0,l.X)(w)}),N=k.register,R=k.handleSubmit,L=k.reset,A=k.formState.errors;return(0,I.jsxs)(m.g,{onSubmit:R((function(e){var n=e.name,o=e.number;return r(!0),c.find((function(e){return e.name.toLowerCase()===n.toLowerCase()}))?Z({title:"".concat(n," is already in contacts"),isClosable:!0,position:"top-right",status:"info",duration:3e3}):c.find((function(e){return e.number===o}))?Z({title:"Number: ".concat(o," is already in contacts"),isClosable:!0,position:"top-right",status:"info",duration:3e3}):(t((0,f.uK)({name:n,number:o})).unwrap().then((function(){Z({title:"".concat(n," is added to contacts"),isClosable:!0,position:"top-right",status:"success",duration:3e3})})).catch((function(){return Z({title:"Something went wrong. Please try again later",isClosable:!0,position:"top-right",status:"error",duration:3e3})})),void L())})),as:"form",mx:"auto",justifyContent:"center",mb:6,maxH:"fit",p:4,bg:"#1a1d2b",borderRadius:"8px",children:[(0,I.jsxs)(g.NI,{isInvalid:A.name,isRequired:!0,children:[(0,I.jsxs)(j.B,{children:[(0,I.jsx)(v.Z,{pointerEvents:"none",children:(0,I.jsx)(x.KQH,{color:"#ffd76d",size:24})}),(0,I.jsx)(C.I,(0,i.Z)((0,i.Z)({type:"text",color:"#ffffff",borderColor:"#ffd76d55",placeholder:"Full Name (Example: Pavlo Lysiuk)",_placeholder:{opacity:.5,color:"#ffd76d"}},N("name")),{},{bg:"#161821"}))]}),(0,I.jsx)(y.J1,{children:A.name&&A.name.message})]}),(0,I.jsxs)(g.NI,{isInvalid:A.number,isRequired:!0,children:[(0,I.jsxs)(j.B,{children:[(0,I.jsx)(v.Z,{pointerEvents:"none",children:(0,I.jsx)(p.q,{color:"#ffd76d"})}),(0,I.jsx)(C.I,(0,i.Z)((0,i.Z)({color:"#ffffff",type:"tel",borderColor:"#ffd76d55",placeholder:"Phone number (Example: XXXXXXX)",_placeholder:{opacity:.5,color:"#ffd76d"}},N("number")),{},{bg:"#161821"}))]}),(0,I.jsx)(y.J1,{children:A.number&&A.number.message})]}),(0,I.jsx)(_.z,{type:"submit",isLoading:$&&o,variant:"outline",color:"#ffd76d",borderColor:"#ffd76d55",_hover:{color:"#1a1d2b",bg:"#ffd76d"},_focus:{color:"#1a1d2b",bg:"#ffd76d"},mt:"2px",children:"Add contact"})]})},Z=o(930),k=o(3771),N=function(e){var n=e.onCancel,o=e.contact,r=(0,a.cI)({mode:"onTouched",resolver:(0,l.X)(w)}),t=r.register,d=r.handleSubmit,c=r.formState,h=c.errors,x=c.isSubmitting,p=c.isValid,j=(0,s.v9)(u.Af),v=(0,b.p)(),y=(0,s.I0)();return(0,I.jsxs)(m.g,{as:"form",onSubmit:d((function(e){var r=e.name,t=e.number;return o.name===r&&o.number===t?n():j.find((function(e){return e.name.toLowerCase()===r.toLowerCase()&&e.name.toLowerCase()!==o.name.toLowerCase()}))?v({title:"".concat(r," is already in contacts"),isClosable:!0,position:"top-right",status:"info",duration:3e3}):j.find((function(e){return e.number===t&&e.number!==o.number}))?v({title:"".concat(t," is already in contacts"),isClosable:!0,position:"top-right",status:"info",duration:3e3}):void y((0,f.Tk)({id:o.id,body:{name:r,number:t}})).unwrap().then((function(){v({title:"Contact updated",isClosable:!0,position:"top-right",status:"success",duration:3e3}),n()})).catch((function(){return v({title:"Something went wrong. Please try again later",isClosable:!0,position:"top-right",status:"error",duration:3e3})}))})),p:4,children:[(0,I.jsxs)(g.NI,{isInvalid:h.name,isRequired:!0,children:[(0,I.jsx)(Z.l,{color:"#ffffff",children:"Name"}),(0,I.jsx)(C.I,(0,i.Z)((0,i.Z)({type:"text",color:"#ffffff",borderColor:"#ffd76d55"},t("name")),{},{defaultValue:null===o||void 0===o?void 0:o.name,bg:"#161821"}))]}),(0,I.jsxs)(g.NI,{isInvalid:h.number,isRequired:!0,children:[(0,I.jsx)(Z.l,{color:"#ffffff",children:"Phone"}),(0,I.jsx)(C.I,(0,i.Z)((0,i.Z)({type:"tel",color:"#ffffff",borderColor:"#ffd76d55"},t("number")),{},{defaultValue:null===o||void 0===o?void 0:o.number,bg:"#161821"}))]}),(0,I.jsxs)(k.h,{display:"flex",justifyContent:"flex-end",mt:"8px",children:[(0,I.jsx)(_.z,{isLoading:x,type:"submit",isDisabled:!p,variant:"outline",color:"#ffd76d",borderColor:"#ffd76d55",_hover:{color:"#1a1d2b",bg:"#ffd76d"},_focus:{color:"#1a1d2b",bg:"#ffd76d"},children:"Save"}),(0,I.jsx)(_.z,{onClick:n,variant:"outline",color:"#ffd76d",borderColor:"#ffd76d55",_hover:{color:"#1a1d2b",bg:"#ffd76d"},_focus:{color:"#1a1d2b",bg:"#ffd76d"},children:"Cancel"})]})]})},R=o(5548).EditIcon,L=o(2144),A=L.useDisclosure,S=L.Popover,z=L.PopoverTrigger,D=L.IconButton,P=L.PopoverContent,q=L.FocusLock,F=L.PopoverCloseButton,B=L.Portal,O=o(2791).useRef,X=function(e){var n=e.contact,o=A(),r=o.onOpen,t=o.onClose,i=o.isOpen,d=O(null);return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(S,{isOpen:i,initialFocusRef:d,onOpen:r,onClose:t,closeOnBlur:!0,border:"none",children:[(0,I.jsx)(z,{children:(0,I.jsx)(D,{w:8,h:8,icon:(0,I.jsx)(R,{}),variant:"ghost",color:"#ffd76d",_hover:{bg:"#ffd76d55"},_focus:{bg:"#ffd76d55"}})}),(0,I.jsx)(B,{children:(0,I.jsx)(P,{bg:"#1a1d2b",borderRadius:"8px",borderColor:"#ffd86d78",children:(0,I.jsxs)(q,{returnFocus:!0,persistentFocus:!1,children:[(0,I.jsx)(F,{}),(0,I.jsx)(N,{onCancel:t,contact:n})]})})})]})})},T=o(2063),E=o(8104),V=o(1022),Y=o(4211),H=o(847),K=o(8874),G=o(5473),J=o(634),M=o(6241),U=o(7685),Q=function(e){var n=e.onClick,o=e.isDeleting,r=(0,V.q)(),t=r.isOpen,i=r.onOpen,d=r.onClose,s=(0,h.useRef)();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(_.z,{type:"button",onClick:i,disabled:o,color:"#ffd76d",variant:"ghost",w:8,h:8,_hover:{bg:"#ff204055"},_focus:{bg:"#ff204055"},children:o?(0,I.jsx)(Y.D,{isIndeterminate:!0,color:"#ffd76d",size:"16px"}):(0,I.jsx)(T.p,{color:"#ff2e4d"})}),(0,I.jsxs)(H.a,{motionPreset:"slideInBottom",leastDestructiveRef:s,onClose:d,isOpen:t,isCentered:!0,children:[(0,I.jsx)(K.Z,{}),(0,I.jsxs)(H._,{w:"320px",bg:"#1a1d2b",boxShadow:"none",borderRadius:"8px",children:[(0,I.jsx)(G.x,{color:"#ffd76d",children:"Deleting contact"}),(0,I.jsx)(J.o,{color:"#ffffff",_hover:{color:"#1a1d2b",bg:"#ffd76d"},_focus:{color:"#1a1d2b",bg:"#ffd76d"}}),(0,I.jsxs)(M.f,{color:"#ffffff",children:[(0,I.jsx)(E.a,{mr:"8px",color:"#ff2e4d"}),"Are you sure? You can't undo this."]}),(0,I.jsxs)(U.m,{children:[(0,I.jsx)(_.z,{isLoading:o,onClick:n,variant:"outline",color:"#ffd76d",borderColor:"#ffd76d55",_hover:{color:"#1a1d2b",bg:"#ffd76d"},_focus:{color:"#1a1d2b",bg:"#ffd76d"},children:"Yes"}),(0,I.jsx)(_.z,{ref:s,onClick:d,ml:3,variant:"outline",color:"#ffd76d",borderColor:"#ffd76d55",_hover:{color:"#1a1d2b",bg:"#ffd76d"},_focus:{color:"#1a1d2b",bg:"#ffd76d"},children:"No"})]})]})]})]})},W=function(e){var n=e.replace(/\D+/g,"");return 7===n.length?n.replace(/^(\d{3})(\d{2})(\d{2})/,"$1 $2$3"):8===n.length?n.replace(/^(\d)(\d{3})(\d{2})(\d{2})/,"$1 $2 $3$4"):9===n.length?n.replace(/^(\d{2})(\d{3})(\d{2})(\d{2})/,"$1 $2$3$4"):10===n.length?n.replace(/^(\d{3})(\d{3})(\d{2})(\d{2})/,"($1) $2 $3$4"):11===n.length?n.replace(/^(\d)(\d{3})(\d{3})(\d{2})(\d{2})/,"+$1 ($2) $3 $4$5"):12===n.length?n.replace(/^(\d{2})(\d{3})(\d{3})(\d{2})(\d{2})/,"+$1 ($2) $3 $4$5"):e},ee=o(6661),ne=function(e){var n=e.contact,o=(0,h.useState)(!1),r=(0,d.Z)(o,2),i=r[0],a=r[1],l=(0,s.I0)();return(0,I.jsxs)(ee.HC,{paddingLeft:"12px",paddingRight:"12px",paddingTop:"4px",paddingBottom:"4px",display:"flex",alignItems:"center",justifyContent:"space-between",color:"#ffffff",bg:"#1a1d2b",borderRadius:"8px",mb:"4px",children:[(0,I.jsxs)(t.xu,{flexBasis:"40%",children:[n.name," "]}),(0,I.jsx)(t.xu,{flexBasis:"40%",children:W(n.number)}),(0,I.jsxs)(t.xu,{flexBasis:"20%",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:{base:"0px",md:"0px"},children:[(0,I.jsx)(X,{contact:n}),(0,I.jsx)(Q,{onClick:function(){l((0,f.GK)(n.id)),a(!0)},isDeleting:i})]})]},n.id)},oe=o(884),re=function(){var e=(0,s.I0)(),n=(0,s.v9)(u.Af),o=(0,s.v9)(u.AD),i=(0,s.v9)(u.Y);(0,h.useEffect)((function(){e((0,f.yF)())}),[e]);var d=function(){var e=o.toLowerCase();return n.filter((function(n){return(null===n||void 0===n?void 0:n.name.toLowerCase().includes(e))||(null===n||void 0===n?void 0:n.number.includes(o))}))},a=d().map((function(e){return e.name[0].toUpperCase()})).filter((function(e,n,o){return o.indexOf(e)===n})),l=function(e){return d().filter((function(n){return n.name[0].toUpperCase()===e}))};return(0,I.jsxs)("div",{children:[0===n.length&&i&&(0,I.jsx)(r.M,{children:(0,I.jsx)(Y.D,{isIndeterminate:!0,color:"#ffd76d"})}),0===n.length&&!i&&(0,I.jsx)(oe.x,{color:"#ffd76d",textAlign:"center",children:"There are no contacts yet. Please add a new contact."}),0===d().length&&0!==n.length&&(0,I.jsx)(oe.x,{color:"#ffd76d",textAlign:"center",children:"There is no such contact..."}),0!==n.length&&d().length>0&&(0,I.jsx)(t.xu,{position:"relative",children:(0,I.jsx)(ee.aV,{position:"relative",children:a.map((function(e){return(0,I.jsx)(ee.HC,{children:(0,I.jsx)(ee.aV,{children:(0,I.jsx)(t.xu,{children:l(e).map((function(e){return(0,I.jsx)(ne,{contact:e},e.id)}))})})},"section-".concat(e))}))})})]})},te=o(6895),ie=o(2276),de=function(){var e=(0,s.v9)(u.AD),n=(0,s.v9)(u.Af),o=(0,s.I0)();return(0,I.jsx)(I.Fragment,{children:0!==n.length&&(0,I.jsxs)(g.NI,{mb:"24px",children:[(0,I.jsx)(C.I,{name:"filter",placeholder:"Find contacts by name or phone number",_placeholder:{opacity:.5,color:"#ffd76d"},type:"text",value:e,onChange:function(e){return o((0,te.T)(e.target.value))},pos:"relative",bg:"#1a1d2b",borderColor:"#ffd86d78",borderRadius:"8px",border:"none"}),(0,I.jsx)(ie.W,{pos:"absolute",top:"50%",right:"16px",transform:"translateY(-50%)",zIndex:2,color:"#ffd76d"})]})})},se=function(){return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(r.M,{children:(0,I.jsxs)(t.xu,{w:"500px",children:[(0,I.jsx)($,{}),(0,I.jsxs)(t.xu,{flexGrow:1,children:[(0,I.jsx)(de,{}),(0,I.jsx)(re,{})]})]})})})}}}]);
//# sourceMappingURL=947.f9f931e1.chunk.js.map