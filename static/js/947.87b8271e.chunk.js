"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[947],{8947:function(e,o,r){r.r(o),r.d(o,{default:function(){return se}});var n=r(6484),t=r(824),d=r(1413),i=r(9439),s=r(9434),a=r(1134),l=r(4695),f=r(8007),c=r(6052),u=r(6351),h=r(2791),x=r(4373),b=r(8382),p=r(2233),m=r(89),g=r(9657),j=r(1692),v=r(7943),C=r(6336),_=r(2437),y=r(7653),I=r(184),w=f.Ry({name:f.Z_().required("Name is required").min(3,"Name must be no less than 3 characters long").matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,"Name may contain only letters, apostrophe, dash and spaces"),number:f.Z_().required("Number is required").transform((function(e){return e.replace(/\D+/g,"")})).min(7,"Number phone must be no less than 7 characters long").max(12,"Number phone must be no more than 12 digits")}).required(),$=function(){var e=(0,h.useState)(!1),o=(0,i.Z)(e,2),r=o[0],n=o[1],t=(0,s.I0)(),f=(0,s.v9)(u.Af),$=(0,s.v9)(u.Y),Z=(0,b.p)();(0,h.useEffect)((function(){$||n(!1)}),[$]);var k=(0,a.cI)({mode:"onTouched",resolver:(0,l.X)(w)}),N=k.register,R=k.handleSubmit,L=k.reset,A=k.formState.errors;return(0,I.jsxs)(m.g,{onSubmit:R((function(e){var o=e.name,r=e.number;return n(!0),f.find((function(e){return e.name.toLowerCase()===o.toLowerCase()}))?Z({title:"".concat(o," is already in contacts"),isClosable:!0,position:"top-right",status:"info",duration:3e3}):f.find((function(e){return e.number===r}))?Z({title:"Number: ".concat(r," is already in contacts"),isClosable:!0,position:"top-right",status:"info",duration:3e3}):(t((0,c.uK)({name:o,number:r})).unwrap().then((function(){Z({title:"".concat(o," is added to contacts"),isClosable:!0,position:"top-right",status:"success",duration:3e3})})).catch((function(){return Z({title:"Something went wrong. Please try again later",isClosable:!0,position:"top-right",status:"error",duration:3e3})})),void L())})),as:"form",mx:"auto",justifyContent:"center",mb:6,maxH:"fit",p:4,bg:"#1a1d2b",borderRadius:"8px",children:[(0,I.jsxs)(g.NI,{isInvalid:A.name,isRequired:!0,children:[(0,I.jsxs)(j.B,{children:[(0,I.jsx)(v.Z,{pointerEvents:"none",children:(0,I.jsx)(x.KQH,{color:"#ffd76d",size:24})}),(0,I.jsx)(C.I,(0,d.Z)((0,d.Z)({type:"text",color:"#ffffff",borderColor:"#ffd76d55",placeholder:"Full Name (Example: Pavlo Lysiuk)",_placeholder:{opacity:.5,color:"#ffd76d"}},N("name")),{},{bg:"#161821",_hover:{borderColor:"#ffd76d"},_focus:{borderColor:"#ffd76d"}}))]}),(0,I.jsx)(_.J1,{children:A.name&&A.name.message})]}),(0,I.jsxs)(g.NI,{isInvalid:A.number,isRequired:!0,children:[(0,I.jsxs)(j.B,{children:[(0,I.jsx)(v.Z,{pointerEvents:"none",children:(0,I.jsx)(p.q,{color:"#ffd76d"})}),(0,I.jsx)(C.I,(0,d.Z)((0,d.Z)({color:"#ffffff",type:"tel",borderColor:"#ffd76d55",placeholder:"Phone number (Example: XXXXXXX)",_placeholder:{opacity:.5,color:"#ffd76d"}},N("number")),{},{bg:"#161821",_hover:{borderColor:"#ffd76d"},_focus:{borderColor:"#ffd76d"}}))]}),(0,I.jsx)(_.J1,{children:A.number&&A.number.message})]}),(0,I.jsx)(y.z,{type:"submit",isLoading:$&&r,variant:"outline",color:"#ffd76d",borderColor:"#ffd76d55",_hover:{color:"#1a1d2b",bg:"#ffd76d"},_focus:{color:"#1a1d2b",bg:"#ffd76d"},mt:"2px",children:"Add contact"})]})},Z=r(930),k=r(3771),N=function(e){var o=e.onCancel,r=e.contact,n=(0,a.cI)({mode:"onTouched",resolver:(0,l.X)(w)}),t=n.register,i=n.handleSubmit,f=n.formState,h=f.errors,x=f.isSubmitting,p=f.isValid,j=(0,s.v9)(u.Af),v=(0,b.p)(),_=(0,s.I0)();return(0,I.jsxs)(m.g,{as:"form",onSubmit:i((function(e){var n=e.name,t=e.number;return r.name===n&&r.number===t?o():j.find((function(e){return e.name.toLowerCase()===n.toLowerCase()&&e.name.toLowerCase()!==r.name.toLowerCase()}))?v({title:"".concat(n," is already in contacts"),isClosable:!0,position:"top-right",status:"info",duration:3e3}):j.find((function(e){return e.number===t&&e.number!==r.number}))?v({title:"".concat(t," is already in contacts"),isClosable:!0,position:"top-right",status:"info",duration:3e3}):void _((0,c.Tk)({id:r.id,body:{name:n,number:t}})).unwrap().then((function(){v({title:"Contact updated",isClosable:!0,position:"top-right",status:"success",duration:3e3}),o()})).catch((function(){return v({title:"Something went wrong. Please try again later",isClosable:!0,position:"top-right",status:"error",duration:3e3})}))})),p:4,children:[(0,I.jsxs)(g.NI,{isInvalid:h.name,isRequired:!0,children:[(0,I.jsx)(Z.l,{color:"#ffffff",children:"Name"}),(0,I.jsx)(C.I,(0,d.Z)((0,d.Z)({type:"text",color:"#ffffff",borderColor:"#ffd76d55"},t("name")),{},{defaultValue:null===r||void 0===r?void 0:r.name,bg:"#161821",_hover:{borderColor:"#ffd76d"},_focus:{borderColor:"#ffd76d"}}))]}),(0,I.jsxs)(g.NI,{isInvalid:h.number,isRequired:!0,children:[(0,I.jsx)(Z.l,{color:"#ffffff",children:"Phone"}),(0,I.jsx)(C.I,(0,d.Z)((0,d.Z)({type:"tel",color:"#ffffff",borderColor:"#ffd76d55"},t("number")),{},{defaultValue:null===r||void 0===r?void 0:r.number,bg:"#161821",_hover:{borderColor:"#ffd76d"},_focus:{borderColor:"#ffd76d"}}))]}),(0,I.jsxs)(k.h,{display:"flex",justifyContent:"flex-end",mt:"8px",children:[(0,I.jsx)(y.z,{isLoading:x,type:"submit",isDisabled:!p,variant:"outline",color:"#ffd76d",borderColor:"#ffd76d55",_hover:{color:"#1a1d2b",bg:"#ffd76d"},_focus:{color:"#1a1d2b",bg:"#ffd76d"},children:"Save"}),(0,I.jsx)(y.z,{onClick:o,variant:"outline",color:"#ffd76d",borderColor:"#ffd76d55",_hover:{color:"#1a1d2b",bg:"#ffd76d"},_focus:{color:"#1a1d2b",bg:"#ffd76d"},children:"Cancel"})]})]})},R=r(5548).EditIcon,L=r(2144),A=L.useDisclosure,S=L.Popover,z=L.PopoverTrigger,D=L.IconButton,P=L.PopoverContent,q=L.FocusLock,F=L.PopoverCloseButton,B=L.Portal,O=r(2791).useRef,X=function(e){var o=e.contact,r=A(),n=r.onOpen,t=r.onClose,d=r.isOpen,i=O(null);return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(S,{isOpen:d,initialFocusRef:i,onOpen:n,onClose:t,closeOnBlur:!0,border:"none",children:[(0,I.jsx)(z,{children:(0,I.jsx)(D,{w:8,h:8,icon:(0,I.jsx)(R,{}),variant:"ghost",color:"#ffd76d",_hover:{bg:"#ffd76d55"},_focus:{bg:"#ffd76d55"}})}),(0,I.jsx)(B,{children:(0,I.jsx)(P,{bg:"#1a1d2b",borderRadius:"8px",borderColor:"#ffd86d78",children:(0,I.jsxs)(q,{returnFocus:!0,persistentFocus:!1,children:[(0,I.jsx)(F,{}),(0,I.jsx)(N,{onCancel:t,contact:o})]})})})]})})},T=r(2063),E=r(8104),V=r(1022),Y=r(4211),H=r(847),K=r(8874),G=r(5473),J=r(634),M=r(6241),U=r(7685),Q=function(e){var o=e.onClick,r=e.isDeleting,n=(0,V.q)(),t=n.isOpen,d=n.onOpen,i=n.onClose,s=(0,h.useRef)();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(y.z,{type:"button",onClick:d,disabled:r,color:"#ffd76d",variant:"ghost",w:8,h:8,_hover:{bg:"#ff204055"},_focus:{bg:"#ff204055"},children:r?(0,I.jsx)(Y.D,{isIndeterminate:!0,color:"#ffd76d",size:"16px"}):(0,I.jsx)(T.p,{color:"#ff2e4d"})}),(0,I.jsxs)(H.a,{motionPreset:"slideInBottom",leastDestructiveRef:s,onClose:i,isOpen:t,isCentered:!0,children:[(0,I.jsx)(K.Z,{}),(0,I.jsxs)(H._,{w:"320px",bg:"#1a1d2b",boxShadow:"none",borderRadius:"8px",children:[(0,I.jsx)(G.x,{color:"#ffd76d",children:"Deleting contact"}),(0,I.jsx)(J.o,{color:"#ffffff",_hover:{color:"#1a1d2b",bg:"#ffd76d"},_focus:{color:"#1a1d2b",bg:"#ffd76d"}}),(0,I.jsxs)(M.f,{color:"#ffffff",children:[(0,I.jsx)(E.a,{mr:"8px",color:"#ff2e4d"}),"Are you sure? You can't undo this."]}),(0,I.jsxs)(U.m,{children:[(0,I.jsx)(y.z,{isLoading:r,onClick:o,variant:"outline",color:"#ffd76d",borderColor:"#ffd76d55",_hover:{color:"#1a1d2b",bg:"#ffd76d"},_focus:{color:"#1a1d2b",bg:"#ffd76d"},children:"Yes"}),(0,I.jsx)(y.z,{ref:s,onClick:i,ml:3,variant:"outline",color:"#ffd76d",borderColor:"#ffd76d55",_hover:{color:"#1a1d2b",bg:"#ffd76d"},_focus:{color:"#1a1d2b",bg:"#ffd76d"},children:"No"})]})]})]})]})},W=function(e){var o=e.replace(/\D+/g,"");return 7===o.length?o.replace(/^(\d{3})(\d{2})(\d{2})/,"$1 $2$3"):8===o.length?o.replace(/^(\d)(\d{3})(\d{2})(\d{2})/,"$1 $2 $3$4"):9===o.length?o.replace(/^(\d{2})(\d{3})(\d{2})(\d{2})/,"$1 $2$3$4"):10===o.length?o.replace(/^(\d{3})(\d{3})(\d{2})(\d{2})/,"($1) $2 $3$4"):11===o.length?o.replace(/^(\d)(\d{3})(\d{3})(\d{2})(\d{2})/,"+$1 ($2) $3 $4$5"):12===o.length?o.replace(/^(\d{2})(\d{3})(\d{3})(\d{2})(\d{2})/,"+$1 ($2) $3 $4$5"):e},ee=r(6661),oe=function(e){var o=e.contact,r=(0,h.useState)(!1),n=(0,i.Z)(r,2),d=n[0],a=n[1],l=(0,s.I0)();return(0,I.jsxs)(ee.HC,{paddingLeft:"12px",paddingRight:"12px",paddingTop:"4px",paddingBottom:"4px",display:"flex",alignItems:"center",justifyContent:"space-between",color:"#ffffff",bg:"#1a1d2b",borderRadius:"8px",mb:"4px",children:[(0,I.jsxs)(t.xu,{flexBasis:"40%",children:[o.name," "]}),(0,I.jsx)(t.xu,{flexBasis:"40%",children:W(o.number)}),(0,I.jsxs)(t.xu,{flexBasis:"20%",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:{base:"0px",md:"0px"},children:[(0,I.jsx)(X,{contact:o}),(0,I.jsx)(Q,{onClick:function(){l((0,c.GK)(o.id)),a(!0)},isDeleting:d})]})]},o.id)},re=r(884),ne=function(){var e=(0,s.I0)(),o=(0,s.v9)(u.Af),r=(0,s.v9)(u.AD),d=(0,s.v9)(u.Y);(0,h.useEffect)((function(){e((0,c.yF)())}),[e]);var i=function(){var e=r.toLowerCase();return o.filter((function(o){return(null===o||void 0===o?void 0:o.name.toLowerCase().includes(e))||(null===o||void 0===o?void 0:o.number.includes(r))}))},a=i().map((function(e){return e.name[0].toUpperCase()})).filter((function(e,o,r){return r.indexOf(e)===o})),l=function(e){return i().filter((function(o){return o.name[0].toUpperCase()===e}))};return(0,I.jsxs)("div",{children:[0===o.length&&d&&(0,I.jsx)(n.M,{children:(0,I.jsx)(Y.D,{isIndeterminate:!0,color:"#ffd76d"})}),0===o.length&&!d&&(0,I.jsx)(re.x,{color:"#ffd76d",textAlign:"center",children:"There are no contacts yet. Please add a new contact."}),0===i().length&&0!==o.length&&(0,I.jsx)(re.x,{color:"#ffd76d",textAlign:"center",children:"There is no such contact..."}),0!==o.length&&i().length>0&&(0,I.jsx)(t.xu,{position:"relative",children:(0,I.jsx)(ee.aV,{position:"relative",children:a.map((function(e){return(0,I.jsx)(ee.HC,{children:(0,I.jsx)(ee.aV,{children:(0,I.jsx)(t.xu,{children:l(e).map((function(e){return(0,I.jsx)(oe,{contact:e},e.id)}))})})},"section-".concat(e))}))})})]})},te=r(6895),de=r(2276),ie=function(){var e=(0,s.v9)(u.AD),o=(0,s.v9)(u.Af),r=(0,s.I0)();return(0,I.jsx)(I.Fragment,{children:0!==o.length&&(0,I.jsxs)(g.NI,{mb:"24px",children:[(0,I.jsx)(C.I,{name:"filter",placeholder:"Find contacts by name or phone number",_placeholder:{opacity:.5,color:"#ffd76d"},type:"text",value:e,onChange:function(e){return r((0,te.T)(e.target.value))},pos:"relative",bg:"#1a1d2b",borderColor:"#ffd86d78",borderRadius:"8px",border:"none"}),(0,I.jsx)(de.W,{pos:"absolute",top:"50%",right:"16px",transform:"translateY(-50%)",zIndex:2,color:"#ffd76d"})]})})},se=function(){return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(n.M,{children:(0,I.jsxs)(t.xu,{w:"500px",children:[(0,I.jsx)($,{}),(0,I.jsxs)(t.xu,{flexGrow:1,children:[(0,I.jsx)(ie,{}),(0,I.jsx)(ne,{})]})]})})})}}}]);
//# sourceMappingURL=947.87b8271e.chunk.js.map