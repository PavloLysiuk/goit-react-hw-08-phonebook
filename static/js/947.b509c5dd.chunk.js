"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[947],{8947:function(e,n,o){o.r(n),o.d(n,{default:function(){return se}});var r=o(6484),t=o(824),i=o(1413),d=o(9439),s=o(9434),a=o(1134),l=o(4695),c=o(8007),f=o(6052),u=o(6351),h=o(89),x=o(9657),b=o(1692),p=o(7943),m=o(6336),g=o(2437),j=o(7653),v=o(2791),C=o(8382),y=o(2233),_=o(4373),I=o(184),w=c.Ry({name:c.Z_().required("Name is required").min(3,"Name must be no less than 3 characters long").matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,"Name may contain only letters, apostrophe, dash and spaces"),number:c.Z_().required("Number is required").transform((function(e){return e.replace(/\D+/g,"")})).min(7,"Number phone must be no less than 7 characters long").max(12,"Number phone must be no more than 12 digits")}).required(),$=function(){var e=(0,v.useState)(!1),n=(0,d.Z)(e,2),o=n[0],r=n[1],t=(0,s.I0)(),c=(0,s.v9)(u.Af),$=(0,s.v9)(u.Y),Z=(0,C.p)();(0,v.useEffect)((function(){$||r(!1)}),[$]);var k=(0,a.cI)({mode:"onTouched",resolver:(0,l.X)(w)}),N=k.register,R=k.handleSubmit,L=k.reset,A=k.formState.errors;return(0,I.jsxs)(h.g,{onSubmit:R((function(e){var n=e.name,o=e.number;return r(!0),c.find((function(e){return e.name.toLowerCase()===n.toLowerCase()}))?Z({title:"".concat(n," is already in contacts"),isClosable:!0,position:"top-right",status:"info",duration:3e3}):c.find((function(e){return e.number===o}))?Z({title:"Number: ".concat(o," is already in contacts"),isClosable:!0,position:"top-right",status:"info",duration:3e3}):(t((0,f.uK)({name:n,number:o})).unwrap().then((function(){Z({title:"".concat(n," is added to contacts"),isClosable:!0,position:"top-right",status:"success",duration:3e3})})).catch((function(){return Z({title:"Something went wrong. Please try again later",isClosable:!0,position:"top-right",status:"error",duration:3e3})})),void L())})),as:"form",mx:"auto",justifyContent:"center",mb:6,maxH:"fit",p:4,bg:"#1a1d2b",borderRadius:"8px",children:[(0,I.jsxs)(x.NI,{isInvalid:A.name,isRequired:!0,children:[(0,I.jsxs)(b.B,{children:[(0,I.jsx)(p.Z,{pointerEvents:"none",children:(0,I.jsx)(_.KQH,{color:"#ffd76d",size:24})}),(0,I.jsx)(m.I,(0,i.Z)((0,i.Z)({type:"text",color:"#ffffff",borderColor:"#ffd76d55",placeholder:"Full Name (Example: Pavlo Lysiuk)",_placeholder:{opacity:.5,color:"#ffd76d"}},N("name")),{},{bg:"#161821"}))]}),(0,I.jsx)(g.J1,{children:A.name&&A.name.message})]}),(0,I.jsxs)(x.NI,{isInvalid:A.number,isRequired:!0,children:[(0,I.jsxs)(b.B,{children:[(0,I.jsx)(p.Z,{pointerEvents:"none",children:(0,I.jsx)(y.q,{color:"#ffd76d"})}),(0,I.jsx)(m.I,(0,i.Z)((0,i.Z)({color:"#ffffff",type:"tel",borderColor:"#ffd76d55",placeholder:"Phone number (Example: XXXXXXX)",_placeholder:{opacity:.5,color:"#ffd76d"}},N("number")),{},{bg:"#161821"}))]}),(0,I.jsx)(g.J1,{children:A.number&&A.number.message})]}),(0,I.jsx)(j.z,{type:"submit",isLoading:$&&o,variant:"outline",color:"#ffd76d",borderColor:"#ffd76d55",_hover:{color:"#1a1d2b",bg:"#ffd76d"},_focus:{color:"#1a1d2b",bg:"#ffd76d"},mt:"2px",children:"Add contact"})]})},Z=o(6661),k=o(930),N=o(3771),R=function(e){var n=e.onCancel,o=e.contact,r=(0,a.cI)({mode:"onTouched",resolver:(0,l.X)(w)}),t=r.register,d=r.handleSubmit,c=r.formState,b=c.errors,p=c.isSubmitting,g=c.isValid,v=(0,s.v9)(u.Af),y=(0,C.p)(),_=(0,s.I0)();return(0,I.jsxs)(h.g,{as:"form",onSubmit:d((function(e){var r=e.name,t=e.number;return o.name===r&&o.number===t?n():v.find((function(e){return e.name.toLowerCase()===r.toLowerCase()&&e.name.toLowerCase()!==o.name.toLowerCase()}))?y({title:"".concat(r," is already in contacts"),isClosable:!0,position:"top-right",status:"info",duration:3e3}):v.find((function(e){return e.number===t&&e.number!==o.number}))?y({title:"".concat(t," is already in contacts"),isClosable:!0,position:"top-right",status:"info",duration:3e3}):void _((0,f.Tk)({id:o.id,body:{name:r,number:t}})).unwrap().then((function(){y({title:"Contact updated",isClosable:!0,position:"top-right",status:"success",duration:3e3}),n()})).catch((function(){return y({title:"Something went wrong. Please try again later",isClosable:!0,position:"top-right",status:"error",duration:3e3})}))})),p:4,children:[(0,I.jsxs)(x.NI,{isInvalid:b.name,isRequired:!0,children:[(0,I.jsx)(k.l,{color:"#ffffff",children:"Name"}),(0,I.jsx)(m.I,(0,i.Z)((0,i.Z)({type:"text",color:"#ffffff",borderColor:"#ffd76d55"},t("name")),{},{defaultValue:null===o||void 0===o?void 0:o.name,bg:"#161821"}))]}),(0,I.jsxs)(x.NI,{isInvalid:b.number,isRequired:!0,children:[(0,I.jsx)(k.l,{color:"#ffffff",children:"Phone"}),(0,I.jsx)(m.I,(0,i.Z)((0,i.Z)({type:"tel",color:"#ffffff",borderColor:"#ffd76d55"},t("number")),{},{defaultValue:null===o||void 0===o?void 0:o.number,bg:"#161821"}))]}),(0,I.jsxs)(N.h,{display:"flex",justifyContent:"flex-end",mt:"8px",children:[(0,I.jsx)(j.z,{isLoading:p,type:"submit",isDisabled:!g,variant:"outline",color:"#ffd76d",borderColor:"#ffd76d55",_hover:{color:"#1a1d2b",bg:"#ffd76d"},_focus:{color:"#1a1d2b",bg:"#ffd76d"},children:"Save"}),(0,I.jsx)(j.z,{onClick:n,variant:"outline",color:"#ffd76d",borderColor:"#ffd76d55",_hover:{color:"#1a1d2b",bg:"#ffd76d"},_focus:{color:"#1a1d2b",bg:"#ffd76d"},children:"Cancel"})]})]})},L=o(5548).EditIcon,A=o(2144),S=A.useDisclosure,z=A.Popover,D=A.PopoverTrigger,P=A.IconButton,q=A.PopoverContent,F=A.FocusLock,B=A.PopoverCloseButton,O=A.Portal,X=o(2791).useRef,T=function(e){var n=e.contact,o=S(),r=o.onOpen,t=o.onClose,i=o.isOpen,d=X(null);return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(z,{isOpen:i,initialFocusRef:d,onOpen:r,onClose:t,closeOnBlur:!0,border:"none",children:[(0,I.jsx)(D,{children:(0,I.jsx)(P,{w:8,h:8,icon:(0,I.jsx)(L,{}),variant:"ghost",color:"#ffd76d",_hover:{bg:"#ffd76d55"},_focus:{bg:"#ffd76d55"}})}),(0,I.jsx)(O,{children:(0,I.jsx)(q,{bg:"#1a1d2b",borderRadius:"8px",borderColor:"#ffd86d78",children:(0,I.jsxs)(F,{returnFocus:!0,persistentFocus:!1,children:[(0,I.jsx)(B,{}),(0,I.jsx)(R,{onCancel:t,contact:n})]})})})]})})},E=o(2063),V=o(1022),Y=o(4211),H=o(847),K=o(8874),G=o(5473),J=o(634),M=o(6241),U=o(7685),Q=o(8104),W=function(e){var n=e.onClick,o=e.isDeleting,r=(0,V.q)(),t=r.isOpen,i=r.onOpen,d=r.onClose,s=(0,v.useRef)();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(j.z,{type:"button",onClick:i,disabled:o,color:"#ffd76d",variant:"ghost",w:8,h:8,_hover:{bg:"#ff204055"},_focus:{bg:"#ff204055"},children:o?(0,I.jsx)(Y.D,{isIndeterminate:!0,color:"#ffd76d",size:"16px"}):(0,I.jsx)(E.p,{color:"#ff2e4d"})}),(0,I.jsxs)(H.a,{motionPreset:"slideInBottom",leastDestructiveRef:s,onClose:d,isOpen:t,isCentered:!0,children:[(0,I.jsx)(K.Z,{}),(0,I.jsxs)(H._,{w:"320px",bg:"#1a1d2b",boxShadow:"none",borderRadius:"8px",children:[(0,I.jsx)(G.x,{color:"#ffd76d",children:"Deleting contact"}),(0,I.jsx)(J.o,{color:"#ffffff",_hover:{color:"#1a1d2b",bg:"#ffd76d"},_focus:{color:"#1a1d2b",bg:"#ffd76d"}}),(0,I.jsxs)(M.f,{color:"#ffffff",children:[(0,I.jsx)(Q.a,{mr:"8px",color:"#ff2e4d"}),"Are you sure? You can't undo this."]}),(0,I.jsxs)(U.m,{children:[(0,I.jsx)(j.z,{isLoading:o,onClick:n,variant:"outline",color:"#ffd76d",borderColor:"#ffd76d55",_hover:{color:"#1a1d2b",bg:"#ffd76d"},_focus:{color:"#1a1d2b",bg:"#ffd76d"},children:"Yes"}),(0,I.jsx)(j.z,{ref:s,onClick:d,ml:3,variant:"outline",color:"#ffd76d",borderColor:"#ffd76d55",_hover:{color:"#1a1d2b",bg:"#ffd76d"},_focus:{color:"#1a1d2b",bg:"#ffd76d"},children:"No"})]})]})]})]})},ee=function(e){var n=e.replace(/\D+/g,"");return 7===n.length?n.replace(/^(\d{3})(\d{2})(\d{2})/,"$1 $2$3"):8===n.length?n.replace(/^(\d)(\d{3})(\d{2})(\d{2})/,"$1 $2 $3$4"):9===n.length?n.replace(/^(\d{2})(\d{3})(\d{2})(\d{2})/,"$1 $2$3$4"):10===n.length?n.replace(/^(\d{3})(\d{3})(\d{2})(\d{2})/,"($1) $2 $3$4"):11===n.length?n.replace(/^(\d)(\d{3})(\d{3})(\d{2})(\d{2})/,"+$1 ($2) $3 $4$5"):12===n.length?n.replace(/^(\d{2})(\d{3})(\d{3})(\d{2})(\d{2})/,"+$1 ($2) $3 $4$5"):e},ne=function(e){var n=e.contact,o=(0,v.useState)(!1),r=(0,d.Z)(o,2),i=r[0],a=r[1],l=(0,s.I0)();return(0,I.jsxs)(Z.HC,{paddingLeft:"12px",paddingRight:"12px",paddingTop:"4px",paddingBottom:"4px",display:"flex",alignItems:"center",justifyContent:"space-between",color:"#ffffff",bg:"#1a1d2b",borderRadius:"8px",mb:"4px",children:[(0,I.jsxs)(t.xu,{flexBasis:"40%",children:[n.name," "]}),(0,I.jsx)(t.xu,{flexBasis:"40%",children:ee(n.number)}),(0,I.jsxs)(t.xu,{flexBasis:"20%",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:{base:"0px",md:"0px"},children:[(0,I.jsx)(T,{contact:n}),(0,I.jsx)(W,{onClick:function(){l((0,f.GK)(n.id)),a(!0)},isDeleting:i})]})]},n.id)},oe=o(884),re=function(){var e=(0,s.I0)(),n=(0,s.v9)(u.Af),o=(0,s.v9)(u.AD),i=(0,s.v9)(u.Y);(0,v.useEffect)((function(){e((0,f.yF)())}),[e]);var d=function(){var e=o.toLowerCase();return n.filter((function(n){return(null===n||void 0===n?void 0:n.name.toLowerCase().includes(e))||(null===n||void 0===n?void 0:n.number.includes(o))}))},a=d().map((function(e){return e.name[0].toUpperCase()})).filter((function(e,n,o){return o.indexOf(e)===n})),l=function(e){return d().filter((function(n){return n.name[0].toUpperCase()===e}))};return(0,I.jsxs)("div",{children:[0===n.length&&i&&(0,I.jsx)(r.M,{children:(0,I.jsx)(Y.D,{isIndeterminate:!0,color:"#ffd76d"})}),0===n.length&&!i&&(0,I.jsx)(oe.x,{color:"#ffd76d",textAlign:"center",children:"There are no contacts yet. Please add a new contact."}),0===d().length&&0!==n.length&&(0,I.jsx)(oe.x,{color:"#ffd76d",textAlign:"center",children:"There is no such contact"}),0!==n.length&&d().length>0&&(0,I.jsx)(t.xu,{position:"relative",children:(0,I.jsx)(Z.aV,{position:"relative",children:a.map((function(e){return(0,I.jsx)(Z.HC,{children:(0,I.jsx)(Z.aV,{children:(0,I.jsx)(t.xu,{children:l(e).map((function(e){return(0,I.jsx)(ne,{contact:e},e.id)}))})})},"section-".concat(e))}))})})]})},te=o(2276),ie=o(6895),de=function(){var e=(0,s.v9)(u.AD),n=(0,s.v9)(u.Af),o=(0,s.I0)();return(0,I.jsx)(I.Fragment,{children:0!==n.length&&(0,I.jsxs)(x.NI,{mb:"24px",children:[(0,I.jsx)(m.I,{name:"filter",placeholder:"Find contacts by name or phone number",_placeholder:{opacity:.5,color:"#ffd76d"},type:"text",value:e,onChange:function(e){return o((0,ie.T)(e.target.value))},pos:"relative",bg:"#1a1d2b",borderColor:"#ffd86d78",borderRadius:"8px",border:"none"}),(0,I.jsx)(te.W,{pos:"absolute",top:"50%",right:"16px",transform:"translateY(-50%)",zIndex:2,color:"#ffd76d"})]})})},se=function(){return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(r.M,{children:(0,I.jsxs)(t.xu,{w:"500px",children:[(0,I.jsx)($,{}),(0,I.jsxs)(t.xu,{flexGrow:1,children:[(0,I.jsx)(de,{}),(0,I.jsx)(re,{})]})]})})})}}}]);
//# sourceMappingURL=947.b509c5dd.chunk.js.map